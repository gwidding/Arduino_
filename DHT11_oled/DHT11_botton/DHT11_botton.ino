#include <LedControl.h>                    // LedControl 헥사파일을 선언
LedControl Dote = LedControl(7, 6, 5, 1);  // 모듈핀 위치 설정 ( DIN , CLK , CS , 몇번째 모듈)
byte digits[17][8] =                       // 0~9까지의 숫자를 byte 타입 2차원 배열로 구성
{                                          // 10개의 숫자(digits) , 8 byte의 신호
  {                                        // 숫자 0 
    B00111000,                             // 총 64개의 LED에 원하는 모양의 신호를 준다
    B01000100,
    B01000100,
    B01000100,
    B01000100,
    B01000100,
    B01000100,
    B00111000
  },

  {                                                  // 숫자 1
    B00010000,
    B00110000,
    B00010000,
    B00010000,
    B00010000,
    B00010000,
    B00010000,
    B00111000 
  },

  {                                                  // 숫자 2
    B00111000,
    B01000100,
    B00000100,
    B00000100,
    B00001000,
    B00010000,
    B00100000,
    B01111100
  },

  {                                                  // 숫자 3
    B00111000,
    B01000100,
    B00000100,
    B00011000,
    B00000100,
    B00000100,
    B01000100,
    B00111000 
  },

  {                                                   // 숫자 4
    B00000100,
    B00001100,
    B00010100,
    B00100100,
    B01000100,
    B01111100,
    B00000100,
    B00000100
  },

  {                                                  // 숫자 5
    B01111100,
    B01000000,
    B01000000,
    B01111000,
    B00000100,
    B00000100,
    B01000100,
    B00111000
  },

  {                                                  // 숫자 6
    B00111000,
    B01000100,
    B01000000,
    B01111000,
    B01000100,
    B01000100,
    B01000100,
    B00111000

  },

  {                                                  // 숫자 7
    B01111100,
    B00000100,
    B00000100,
    B00001000,
    B00010000,
    B00100000,
    B00100000,
    B00100000
  },

  {                                                  // 숫자 8
    B00111000,
    B01000100,
    B01000100,
    B00111000,
    B01000100,
    B01000100,
    B01000100,
    B00111000 
  },

  {                                                  // 숫자 9
    B00111000,
    B01000100,
    B01000100,
    B01000100,
    B00111100,
    B00000100,
    B01000100,
    B00111000
  },

  {                                                  // A
    B00010000,
    B00101000,
    B01000100,
    B01000100,
    B01111100,
    B01000100,
    B01000100,
    B01000100 
  },
  {                                                  // B
    B01111000,
    B01000100,
    B01000100,
    B01111000,
    B01000100,
    B01000100,
    B01000100,
    B01111000 
  },
  {                                                  // C
    B00011100,
    B00100000,
    B01000000,
    B01000000,
    B01000000,
    B01000000,
    B00100000,
    B00011100 
  },
  {                                                  // D
    B01110000,
    B01001000,
    B01000100,
    B01000100,
    B01000100,
    B01000100,
    B01001000,
    B01110000 
  },
  {                                                  // E
    B01111100,
    B01000000,
    B01000000,
    B01111100,
    B01000000,
    B01000000,
    B01000000,
    B01111100 
  },
  {                                                  // F
    B01111100,
    B01000000,
    B01000000,
    B01111100,
    B01000000,
    B01000000,
    B01000000,
    B01000000 
  },
  {                                                  // 기호
    B00000000,
    B01000100,
    B10101010,
    B10010010,
    B10000010,
    B01000100,
    B00101000,
    B00010000 
  }
};

//0~F까지 + 기호
int i = 0, j;
volatile byte state = LOW;
void setup() 
{
  Dote.shutdown(0, false);                       // 절전모드로 (첫번째 모듈, 절전모드를 하지 않는다) 설정 
  Dote.setIntensity(0, 7);                       // 밝기를 조절 (첫번째 모듈, 1~15까지 원하는 밝기) 설정
  Dote.clearDisplay(0);                          // LED를 초기화 설정 (첫번째 모듈)

  attachInterrupt(0, next, FALLING);
}

void loop() 
{ 
  
  for (j = 0; j <8; j++) {  
      Dote.setRow(0, j, digits[i][j]);
  } 
  delay (500);                                   // 0.5초의 딜레이 
}

void next()
{
  state != state;
  if (i < 18) i++;
  else if (i = 18) i=0;
  
}
